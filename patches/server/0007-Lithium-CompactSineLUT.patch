From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: JellySquid <jellysquid+atwork@protonmail.com>
Date: Fri, 5 Feb 2021 00:16:30 -0600
Subject: [PATCH] lithium: CompactSineLUT

Original code by CaffeineMC, licensed under GNU Lesser General Public License v3.0
You can find the original code on https://github.com/CaffeineMC/lithium-fabric (Yarn mappings)

diff --git a/src/main/java/net/minecraft/util/Mth.java b/src/main/java/net/minecraft/util/Mth.java
index 10a126d11d84287d82abd22f084490cf2683372e..4ba1913dcaa27dfb12257d530f874e79ca4b4b5e 100644
--- a/src/main/java/net/minecraft/util/Mth.java
+++ b/src/main/java/net/minecraft/util/Mth.java
@@ -8,6 +8,7 @@ import net.minecraft.core.Vec3i;
 import net.minecraft.world.phys.AABB;
 import net.minecraft.world.phys.Vec3;
 import org.apache.commons.lang3.math.NumberUtils;
+import com.notsatvrn.graphene.util.math.CompactSineLUT; // Mirai
 
 public class Mth {
     private static final int BIG_ENOUGH_INT = 1024;
@@ -30,7 +31,8 @@ public class Mth {
         }
 
     });
-    private static final Random RANDOM = new Random();
+    private static final Random RANDOM = new Random(); // Mirai - too lazy to edit correctly this line
+    public static float[] getSinTable() { return SIN; } // Mirai
     private static final int[] MULTIPLY_DE_BRUIJN_BIT_POSITION = new int[]{0, 1, 28, 2, 29, 14, 24, 3, 30, 22, 20, 15, 25, 17, 4, 8, 31, 27, 13, 23, 21, 19, 16, 7, 26, 12, 18, 6, 11, 5, 10, 9};
     private static final double ONE_SIXTH = 0.16666666666666666D;
     private static final int FRAC_EXP = 8;
@@ -40,11 +42,13 @@ public class Mth {
     private static final double[] COS_TAB = new double[257];
 
     public static float sin(float value) {
-        return SIN[(int)(value * 10430.378F) & '\uffff'];
+        //return SIN[(int)(value * 10430.378F) & '\uffff'];
+        return CompactSineLUT.sin(value); // Mirai
     }
 
     public static float cos(float value) {
-        return SIN[(int)(value * 10430.378F + 16384.0F) & '\uffff'];
+        //return SIN[(int)(value * 10430.378F + 16384.0F) & '\uffff'];
+        return CompactSineLUT.cos(value); // Mirai
     }
 
     public static float sqrt(float value) {
